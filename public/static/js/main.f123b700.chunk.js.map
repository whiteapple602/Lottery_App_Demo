{"version":3,"sources":["web3.js","contractConfig.js","lottery.js","App.js","serviceWorker.js","index.js"],"names":["web3","window","Web3","currentProvider","address","contractInfo","abi","contract","eth","Contract","App","state","manager","players","balance","value","message","isMetaMaskPluginAvailable","isTransactionIsRunning","onSubmit","event","a","preventDefault","ethereum","enable","getAccounts","accounts","setState","lottery","methods","enter","send","from","utils","toWei","updateContractInfo","onClickPickWinner","pickWinner","onClickUpdateAnnouncement","this","call","getPlayers","getBalance","options","className","inputForm","announcements","rules","target","href","onClick","length","fromWei","id","type","name","placeholder","onChange","active","spinner","text","mainWindow","React","Component","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f123b700.chunk.js","sourcesContent":["import Web3 from 'web3';\n\nconst web3 = window.web3 ? new Web3(window.web3.currentProvider) : null;\n\nexport default web3;\n","const contractAddress = '0x8C9815E2372bC6F9Dec915751B31666aB08b2edb';\nconst contractAbi = [{\"constant\":true,\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"pickWinner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"random\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getPlayers\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"enter\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"players\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}];\nexport default { contractAddress, contractAbi };","import web3 from './web3';\nimport contractInfo from './contractConfig';\n\nconst address = contractInfo.contractAddress;\nconst abi = contractInfo.contractAbi;\nconst contract = web3 ? new web3.eth.Contract(abi, address) : null;\n\nexport default contract;\n","import React from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\nimport contractInfo from './contractConfig';\n\nclass App extends React.Component {\n  state = { \n    manager: '', \n    players: [], \n    balance: '', \n    value: '', \n    message: '', \n    isMetaMaskPluginAvailable: false, \n    isTransactionIsRunning: false \n};\n  \n  async componentDidMount() {\n    const isMetaMaskPluginAvailable = web3 && lottery;\n    this.setState({ isMetaMaskPluginAvailable });    \n    if (isMetaMaskPluginAvailable) {\n      this.updateContractInfo();\n    }\n  }\n\n  async updateContractInfo() {\n    const manager = await lottery.methods.manager().call();\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n    this.setState({ manager, players, balance });\n  }\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({ message: 'Transaction is processing. This might take 12 to 30 seconds.', isTransactionIsRunning: true });\n    await lottery.methods.enter().send({\n      from: accounts[0],\n      value: web3.utils.toWei(this.state.value, 'ether')\n    });\n    this.updateContractInfo();\n    this.setState({ message: 'You entered to the lottery', isTransactionIsRunning: false, value: '' });\n  };\n\n  onClickPickWinner = async () => {\n    await window.ethereum.enable();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({ message: 'Transaction is processing. This might take 9 to 15 seconds.', isTransactionIsRunning: true });\n    await lottery.methods.pickWinner().send({\n      from: accounts[0]\n    });\n    this.setState({ message: 'Winner picked', isTransactionIsRunning: false });\n  };\n\n  onClickUpdateAnnouncement = () => {\n    this.updateContractInfo();\n  }\n\n  mainWindow() {\n    return (\n      <div className=\"container-contact100\">\n        <div className=\"wrap-contact100\">\n          <form onSubmit={this.onSubmit} className=\"contact100-form validate-form\">\n            <span className=\"contact100-form-title\">\n              Try Your Luck\n            </span>\n            { this.inputForm() }\n            { this.announcements() }\n          </form>\n          { this.rules() }\n        </div>\n      </div>\n    );\n  }\n\n  rules() {\n    return (\n      <div className=\"contact100-more flex-col-c-m\">\n        <div className=\"flex-w size1 p-b-47\">\n          <div className=\"txt1 p-r-25\">\n            <span className=\"lnr lnr-book\"></span>\n          </div>\n\n          <div className=\"flex-col size2\">\n            <span className=\"txt1 p-b-20\">\n              The Honest Lottery App \n            </span>\n\n            <span className=\"txt2\">\n              This lottery contract has a prize pool and a list of people who have entered the prize pool.\n              People send some amount of money(ether) in the contract. As soon as people send some amount of money,\n              they are being recorded as a player. Ethers, that the players send, directly goes to the contract account.\n              After a certain times, contract manager make the contract to pick a winner. \n              Then the contract pick a winner randomly and transfer all money from the prize pool to the winner.\n              At that point, the lottery contract resets and becomes ready to accept a new list of players.\n            </span>\n\n            <div className=\"contract-info-container\">\n              <div>\n                Contract Address: { contractInfo.contractAddress }\n              </div>\n              <div>\n                Monitor Contract Transaction in <a \n                                                    target='_blank' \n                                                    className=\"remote-link\" \n                                                    href=\"https://rinkeby.etherscan.io/tx/0x3349da25727612e32d292b2fd1f1d2ac5d07b35b9b0f62f356f60d3aa65c6241\"\n                                                    >EtherScan</a>\n              </div>\n              <div>\n                Source Code: <a \n                                target='_blank' \n                                className=\"remote-link\" \n                                href=\"https://github.com/bmshamsnahid/Decentralized-Lottery-App\">Github</a>\n              </div>\n              <div>\n                Inspired from <a \n                                target='_blank' \n                                className=\"remote-link\" \n                                href=\"https://www.udemy.com/course/ethereum-and-solidity-the-complete-developers-guide\">Stephen Grider Course</a>\n              </div>\n              <div>\n                Powered By <a target='_blank' className=\"remote-link\" href=\"https://www.ethereum.org/\">Ethereum Network</a>\n              </div>\n              <div>\n                Developed By <a target='_blank' className=\"remote-link\" href=\"https://shams-nahid.herokuapp.com/\">Shams Nahid</a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  announcements() {\n    const { manager, players, balance } = this.state;\n    return (\n      <div className=\"announcement-container\">\n        <div className=\"announcement-title\">\n          Announcements\n          <div className=\"refresh-button\" onClick={this.onClickUpdateAnnouncement}>\n            <span className=\"refresh-text\">Update Announcements</span>\n            <span className=\"lnr lnr-sync refresh-icon\"></span>\n          </div>\n        </div>\n        <div className=\"announcement-section\">\n          <span className=\"lnr lnr-bullhorn announcement-icon\"></span>\n          <div className=\"announcement-status\">\n            Minimum <span className=\"marked-number\">0.10</span> ether is required.\n          </div>\n        </div>\n        <div className=\"announcement-section\">\n          <span className=\"lnr lnr-bullhorn announcement-icon\"></span>\n          <div className=\"announcement-status\">\n            The contract is managed by <span className=\"manager-address\">{ manager }</span>.\n          </div>\n        </div>\n        <div className=\"announcement-section\">\n          <span className=\"lnr lnr-bullhorn announcement-icon\"></span>\n          <div className=\"announcement-status\">\n            Total <span className=\"marked-number\">{ players.length }</span> players already joined here.\n          </div>\n        </div>\n        <div className=\"announcement-section\">\n          <span className=\"lnr lnr-bullhorn announcement-icon\"></span>\n          <div className=\"announcement-status\">\n            You may win <span className=\"marked-number\">{ web3.utils.fromWei(balance, 'ether') }</span> ether !!!.\n          </div>\n        </div>\n        <div className=\"manager-section\">\n          <div className=\"manager-warning\">(Only For Contract Manager)</div>\n          <button onClick={this.onClickPickWinner} className=\"custom-button\" >Pick Winner</button>\n        </div>\n      </div>\n    );\n  }\n\n  inputForm() {\n    return (\n      <div>\n        <div className=\"wrap-input100 validate-input\">\n          <input \n            id=\"email\" \n            className=\"input100\" \n            type=\"text\" \n            name=\"email\" \n            placeholder=\"Example: 0.50\"\n            value={this.state.value}\n            onChange={event => this.setState({ value: event.target.value })} />\n          <span className=\"focus-input100\"></span>\n        </div>\n        <div className=\"container-contact100-form-btn\">\n          <button className=\"contact100-form-btn\">\n            Join\n          </button>\n        </div>\n        <span className=\"network-warning\">This app is running on Rinkeby test network and dealing with fake ether.</span>\n      </div>\n    );\n  }\n\n  render() {\n    const { isMetaMaskPluginAvailable, isTransactionIsRunning, message } = this.state;\n    if (isMetaMaskPluginAvailable) {\n      return (\n        <LoadingOverlay\n          active={ isTransactionIsRunning }\n          spinner\n          text={ message }>\n            {  this.mainWindow() }\n        </LoadingOverlay>\n      );\n    } else {\n      return (\n        <LoadingOverlay\n          active={!isMetaMaskPluginAvailable}\n          spinner\n          text='Metamask plugin not found...'\n          >\n          <p className='no-meta-mask'></p>\n        </LoadingOverlay>\n      )\n    }\n  }\n}\n\nexport default App;\n ","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}